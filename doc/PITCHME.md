#### Histoires d'un étudiant perfectionniste sous pression

![AFPy logo](doc/img/afpylyon.png)

_23 janvier 2019 - **frédéric zind** - AFPy Lyon_

Note:

- avant donner argent pour assister
- nouvelle étape : assister gratuitement
- vivement l'étape suivante…

+++

12 mois (moins un jour) à la découverte de **Python** avec _OpenClassrooms_

![La Cordée logo](doc/img/lacordee.png)
![python logo](doc/img/python.png)
![OC logo](doc/img/openclassrooms.png)

Note:

- Départ dynamique, lever de mains
- Qui AFPY ?
- niveau débutant
- Déclic Guillaume A.
- 1ère DRF / VueJS  : Lucien

+++

Mon 1er **Django** en bricolant avec (entre autre) la base **`openfoodfacts.org`**

![](doc/img/django.png)
![OFF logo](doc/img/openfoodfacts.png)
![](doc/img/stackoverflow.png)
![](doc/img/git.png)
![](doc/img/github.png)
![](doc/img/heroku.png)
![](doc/img/postgres.png)
![](doc/img/bootstrap.png)

Note:

- Qui dev django ?

---

### La Cordée

![La Cordée logo](doc/img/200-lacordee.png)

Note:

- Qui déjà venu dans une cordée ?
- DOUBLE CLICK

+++

![La Cordée logo](doc/img/lacordee.png)
@ul
- `communauté de travail != #coworking`
- du WIFI
- du café
@ulend

+++

![La Cordée logo](doc/img/lacordee.png)

… mais surtout :
@ul
- du partage
- une communauté IRL / virtuelle
- des jeux de mots / des goûters (de folie !)
- https://www.la-cordee.net
@ulend

Note:

- mars 2017
- 6 à Lyon
- Annecy
- Rennes
- Nantes
- …

---

### Me, myself & I

Note:

- Je m'appelle …
- Qui + de 40 ans ?
- (dans qque semaines)

+++

### Me, myself & I

![ti99](doc/img/ti99.jpg)

Note:

- découverte tôt
- Tandy, Thomson, Atari, Amstrad, etc…
- Fascination pour les outils = mécanique (discipline de la Physique)
- Évolution en parallèle Meca / Info

+++

![crous](doc/img/crous.jpg)

Note:

- études de mécanique
- voisin de palier
- avant virtualBox, docker… / boite disquette
- Debian 3 (woody)

+++

![as400](doc/img/as400.jpg)

Note:

- bosser dans la logistique + colloc IT  = situation cocasse

+++

![2007](doc/img/2007.jpg)

Note:

- 17 ans de gestion technique
- poke Benjamin M.
- WTF : img spot pub SFR

---

### Python & OpenClassrooms

![py](doc/img/python.png)
![OC logo](doc/img/openclassrooms.png)

+++

![python logo](doc/img/python.png)

_Pourquoi apprendre Python ?_

Note:

- Qui n'a jamais pythonné ?
- Pourquoi apprendre Python ?

+++

![python logo](doc/img/python.png)

_Sam & Max_ !

+++

![python logo](doc/img/python.png)

_Sam & Max_ :

> Python : meilleur nulle part, excellent partout.

Note:

- léger
- lisible
- vivant
- versatile

+++

![OC logo](doc/img/openclassrooms.png)

`www.openclassrooms.com` ?

Note:

- Qui ?

+++

![OC logo](doc/img/openclassrooms.png)

`www.openclassrooms.com` :

> OpenClassrooms est une école en ligne offrant des parcours diplômants et professionnalisants à plus de trois millions d’étudiants chaque mois à travers le monde.

Note:

- ex SDZ

+++

![OC logo](doc/img/openclassrooms.png)

### Le parcours DAPy :

@ul
- Mentor individuel
- Diplôme RNCP 2 (bac +3/4)
- Durée flexible (12 mois)
- 13 projets
@ulend

Note:

- Poke Benoit P., Pierre-Loic B.
- Encordé : Charles B.
- rumeur de MàJ…

---

### OpenFoodFacts.org ?

![OFF logo](doc/img/318-openfoodfacts.png)

Note:

- Qui ?
- DBLE CLICK

+++

![OFF logo](doc/img/openfoodfacts.png)

@ul
- Depuis 2012
- Une base de produits alimentaires
- **Par** & **pour** tous
- Décoder les étiquettes
- Trouver des produits
- Comparer et changer
- Explorer et découvrir
@ulend

Note:

- slack
- Réunion Lyonnaise régulière ?
- Poke Benoit P., Sebleouf

+++

![OFF logo](doc/img/openfoodfacts.png)

![products](https://fr.blog.openfoodfacts.org/images/2018_off_produits_1000x500_t.png)

Note:

- 2018 Année faste

+++

![OFF logo](doc/img/openfoodfacts.png)

![map](https://fr.blog.openfoodfacts.org/images/2018_off_map_1000x500_t.png)

+++

![OFF logo](doc/img/openfoodfacts.png)

### Donnez des Sioux !

![lilo](https://fr.blog.openfoodfacts.org/images/2018_off_lilo_1000x500_t.png)

Note:

- dons (déductibles à 66%)
- Lilo
- réponse ANIA : Numalim (Fédération nationale des industriels de l’alimentaire)
- (6.5 M / 3 publique)

+++

![OFF logo](doc/img/openfoodfacts.png)

![cepdcv](https://cestemballepresdechezvous.fr/images/misc/cestemballepresdechezvous.png)

Note:

- `>` 100 usages (yuka, syst U, etc.)
- source d'études

---

# Le projet #8

_( enfin ! )_

Note:

- Repos des bras

---

> Proposer un site web qui permet trouver de "meilleurs" produits alimentaires

---

### Contraintes

@ul
- Django
- Heroku
- PostgreSQL
- Bootstrap
- Github
@ulend

+++

### Découverte de…

@ul
- _PostgreSQL_
- _Bootstrap_
- _ORM_
- _Django_ (!)
@ulend

Note:

- mais MySQL
- pas compétent en front (psycho-rigidité)
- Crainte de bootstrap (mais ça va finalement) / KNACSS
- Réputation Django : outillage
- Contraste avec flask

+++

### Dans ma valise…

![](doc/img/bagages.png)

@ul
- DRY … <3
- tests … <3
- _Heroku_ … <3
- API **OpenFoodFacts**
- Github
- _comprehension_ list, dict, foo, … <3
@ulend

Note:

- DRY idéal quand sujet a des tendances psychorigides
- TDD une motivation de longue date
- Confort d'heroku
- Pas fan de Github mais excellent outil (même si tout seul…)

---

## Le modèle de données

Note:

- En premier

+++

![PDM 1](doc/img/pdm-1.png)

Note:

- Caractéristique Django : built-in Models

+++

![PDM 2](doc/img/pdm-2.png)

+++

![PDM 3](doc/img/pdm-3.png)

+++

![PDM 4](doc/img/pdm-4.png)

+++

### Facile, mais …

+++

![model diag 1](doc/img/model-diagram-1.png)

Note:

- Beaucoup de données dans OFF

+++

![model diag 2](doc/img/model-diagram-2.png)

Note:

- petit besoin

+++

![model diag 3](doc/img/model-diagram-3.png)

Note:

- Pas superposable
- 3 types de données

+++

![model diag 4](doc/img/model-diagram-4.png)

Note:

- identique BD / OFF

+++

![model diag 5](doc/img/model-diagram-5.png)

Note:

- +/- différentes BD / OFF

+++

![model diag 6](doc/img/model-diagram-6.png)

Note:

- Inutile au projet

+++?code=ersatz/models.py&title=Product models

@[18-28](Champs originaux)
@[28-35](Champs spéciaux)

Note:

- nutriscore : champ de comparaison
- code : id produit codé dans CàB
- URL / txt / img
- Mais nom peut être caractérisé par pleins de champs !
- Idem pour la catégories
- découpage de l'info (effet noSQL), i18n / l10n
- Attention aux yeux : code à suivre !

+++?code=ersatz/config.py&title=Configuration DRY ?

@[4](Import Product)
@[17-24](Moisson du modèle des produits)
@[29-31](Ajout des champs spéciaux)

Note:

- Définition modèle et choix champs API?
- Dilemme de la conf : Tout en double?
- Pas envie recopier modèle dans conf
- introspection du modèle
- choix guidé par amour comprehension list?
- lunettes PEP8

+++?code=ersatz/views/toolbox.py&title=Traitement des champs d'API

@[222-223](Traitement des réponses de l'API)
@[229-235](La réponse est-elle utile ?)
@[243-249](Récupération des champs gardés)
@[250-253](Les champs vide sont mis à `False`)
@[255-256](Appel des méthodes de traitement des champs spéciaux)
@[335-351](Génération des noms de produits)
@[258-265](Retour de la réponse d'API après traitement)

Note:

- Aïe

+++

### Du VDDD au TDD !

Note:

- Poursuite de ma quête vers TDD
- AFPy : Évangile St Raphael G : Pytest !

+++?code=ersatz/tests/tests.py&title=Tests

@[13-18](Test des requêtes utilisateurs : fake object)
@[20-26](Requète utilisateur incorrecte)
@[30-36](Requète utilisateur correcte)
@[38-43](Requète utilisateur correcte : test)
@[131-140](Mock de l'API avec du JSON)
@[142-148](Traitement des produits : test)
@[166-179](Tests de non-regression)

---

#### `from __future__ import ideas`

@ul
* Coverage 100% ! (TDD, DB & Selenium) <3
* Bascule vers l'`API` si pas de substitut en DB
* MàJ DB vs. OFF (admin <3 )
* Ajout de critères de substitution (modèle OO)
* … et plus ! (cf. issues)
@ulend

---

## Difficultés rencontrées

@ul
- Tests dans le contexte _Django_
- Découverte de _Bootstrap_
- Héritage de templates  et position de la logique
- Comprendre l'arborescence _Django_
- **rester dans dans les spec client** (même si…) !
@ulend

---

## Questions, remarques, plaintes ?

…

---

**Merci ! ! **

![QRcode](doc/img/qrcode.png)

http://pro.zind.fr
